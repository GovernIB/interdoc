<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">


<ui:composition template="/WEB-INF/templates/layout.xhtml">

	<ui:define name="pageTitle">#{labels.listAcces_title}</ui:define>

	<ui:define name="breadcrumb">
		<p:menuitem value="#{labels.listAcces_link}" outcome="/listAcces" />
	</ui:define>

	<ui:define name="metadata">
		<f:metadata>
			<f:viewParam id="referenciaId" name="referenciaId"
				value="#{Long.parseLong(accesModel.value.referenciaId)}" required="false">
				<f:validateLongRange minimum="1" />
			</f:viewParam>

		</f:metadata>
	</ui:define>

	<ui:define name="content">

		<c:choose>
			<c:when test="#{not empty param['referenciaId']}">
				<h:outputText value="Referencia is not null" />
				<h:outputText value="#{param['referenciaId']}" />

            <h:form>               
	            <ui:decorate template="/WEB-INF/decorations/buttons.xhtml">
	                <ui:define name="buttons">
	                    <p:button value="#{labels.button_tornar}" outcome="/listAcces"
	                              styleClass="float-right"/>
	                </ui:define>
	            </ui:decorate>
	            
            </h:form>	            
				
			</c:when>
			<c:otherwise>

				<p>
					<h:form>
						<p:dataTable id="dataTable" value="#{listAcces.lazyModel}"
							var="acces" sortMode="multiple" paginator="true" lazy="true"
							filterDelay="300" widgetVar="unitatsTable" rows="10"
							rowsPerPageTemplate="10,20,50,100" paginatorPosition="bottom"
							paginatorAlwaysVisible="false"
							paginatorTemplate="{RowsPerPageLabel} {RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport}
                             {NextPageLink} {LastPageLink}"
							currentPageReportTemplate="#{labels.dataTable_currentPageReport}"
							emptyMessage="#{labels.dataTable_emptyMessage}">
							<f:facet name="{RowsPerPageLabel}">
                        #{labels.dataTable_rowsPerPage}
                    </f:facet>
							<p:column sortBy="#{acces.id}">
								<f:facet name="header">#{labels.acces_id}</f:facet>
								<h:outputText value="#{acces.id}" />
							</p:column>

							<p:column filterBy="#{acces.identificacio}"
								sortBy="#{acces.identificacio}">
								<f:facet name="header">#{labels.acces_identificacio}</f:facet>
								<h:outputText value="#{acces.identificacio}" />
							</p:column>
							<p:column filterBy="#{acces.tipusIdentificacio}"
								sortBy="#{acces.tipusIdentificacio}">
								<f:facet name="header">#{labels.acces_tipusidentificacio}</f:facet>
								<h:outputText value="#{acces.tipusIdentificacio}" />
							</p:column>
							<p:column filterBy="#{acces.ip}" sortBy="#{acces.ip}">
								<f:facet name="header">#{labels.acces_ip}</f:facet>
								<h:outputText value="#{acces.ip}" />
							</p:column>
							<p:column filterBy="#{acces.referenciaId}"
								sortBy="#{acces.referenciaId}">
								<f:facet name="header">#{labels.acces_referenciaId}</f:facet>
								<h:outputText value="#{acces.referenciaId}" />
							</p:column>
							<p:column sortBy="#{acces.dataCreacio}">
								<f:facet name="header">#{labels.acces_dataCreacio}</f:facet>
								<h:outputText value="#{acces.dataCreacio}">
									<f:convertDateTime type="localDate" pattern="dd-MM-yyyy" />
								</h:outputText>
							</p:column>
						</p:dataTable>
					</h:form>
				</p>

			</c:otherwise>
		</c:choose>

	</ui:define>
</ui:composition>
</html>
